!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.shallowChanges=r()}(this,function(){function e(e,r){return e===r||e!==e&&r!==r}function r(e){return void 0!==e}function n(e){return"object"==typeof e&&null!==e}function t(e,r){var n=[];if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)r(e[t],t)&&n.push(t);else for(var o=Object.keys(e),f=o.length-1;f>=0;f--){var u=o[f];r(e[u],u)&&n.push(u)}return n}function o(o,f,u){void 0===u&&(u={});var i=u.is;void 0===i&&(i=e);var a=u.isDefined;void 0===a&&(a=r);var d=[],s=[],l=[],h=[];if(!n(o)||!n(f))return!1;if(!i(o,f)){var v=t(o,a),p=t(f,a);if(v.length)if(p.length){for(var c={},g=p.length-1;g>=0;g--)c[p[g]]=g;for(var y=v.length-1;y>=0;y--){var b=v[y];a(f[b],b)?i(o[b],f[b])?l.push(b):h.push(b):s.push(b)}for(var j=p.length-1;j>=0;j--){var m=p[j];o.hasOwnProperty(m)||d.push(m)}}else s=v;else d=p}return{added:d,deleted:s,equal:l,updated:h}}return o});
