!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.shallowChanges=n()}(this,function(){function e(e,n){return e===n||e!==e&&n!==n}function n(e){return void 0!==e}function r(e){return"object"==typeof e&&null!==e}function t(e,n){var r=[];if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)n(e[t],t)&&r.push(t);else for(var o=Object.keys(e),f=o.length-1;f>=0;f--){var i=o[f];n(e[i],i)&&r.push(i)}return r}function o(o,f,i){void 0===i&&(i={});var u=i.is;void 0===u&&(u=e);var a=i.isDefined;void 0===a&&(a=n);var d=[],l=[],s=[],v=[];if(!r(o)||!r(f))return!1;if(!u(o,f)){var h=t(o,a),p=t(f,a);if(h.length)if(p.length){for(var c={},g=p.length-1;g>=0;g--)c[p[g]]=g;for(var y=h.length-1;y>=0;y--){var b=h[y];a(f[b],b)?u(o[b],f[b])?s.push(b):v.push(b):l.push(b)}for(var j=p.length-1;j>=0;j--){var m=p[j];!m in o&&d.push(m)}}else l=h;else d=p}return{added:d,deleted:l,equal:s,updated:v}}return o});
